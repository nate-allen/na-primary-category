"use strict";let primaryCategory={};primaryCategory.admin=function(e){let a,r=e("body"),t={category_checklist:e("#categorychecklist"),hidden_field:e(".na-primary-category-id")};return{init:function(){a=primaryCategory.admin,r.on("change","#categorychecklist input[type=checkbox]",a.setup_buttons).on("click",".na-make-primary-category",a.make_category_primary).on("change",".yoast-wpseo-primary-term",a.update_hidden_field),a.setup_primaryCategory(),a.maybe_setup_buttons()},maybe_setup_buttons:function(){window.primary_category_admin.yoast_seo_installed||window.primary_category_admin.user_has_permission&&(t.category_checklist.find("input[type=checkbox]:checked").length<2||a.setup_buttons())},setup_buttons:function(){if(window.primary_category_admin.yoast_seo_installed)return;t.category_checklist.find("li").each(function(){let r=e(this).prop("id");if(!e(this).find("input[type=checkbox]").prop("checked"))return a.remove_make_primary_button(r),a.remove_primary_label(r),!0;e(this).hasClass("na-is-primary-category")?a.add_primary_label(r):a.add_make_primary_button(r)});let r=t.category_checklist.find("input[type=checkbox]:checked:first").parents("li").prop("id");t.category_checklist.find(".na-is-primary-category").length||a.add_primary_label(r),1===t.category_checklist.find("input[type=checkbox]:checked").length&&a.remove_primary_label(r),t.category_checklist.find("input[type=checkbox]:checked").length||t.hidden_field.val("")},setup_primaryCategory:function(){if(window.primary_category_admin.yoast_seo_installed){let a=e(".yoast-wpseo-primary-term").val();t.hidden_field.val(a)}else if(t.hidden_field.val()){let e=t.hidden_field.val();a.add_primary_label("category-"+e)}},make_category_primary:function(){t.category_checklist.find(".na-is-primary-category").removeClass("na-is-primary-category"),e(this).parents("li").addClass("na-is-primary-category"),a.setup_buttons()},add_make_primary_button:function(r){let t=e("#"+r),i=e("<button>",{type:"button",class:"na-make-primary-category"}).text(window.primary_category_admin.i18n.make_primary);t.find(".na-make-primary-category").length||(a.remove_primary_label(r),t.append(i))},add_primary_label:function(r){let i=e("#"+r),n=e("<span>",{class:"na-primary"}).text(window.primary_category_admin.i18n.primary);if(!i.find(".na-primary").length&&(a.remove_make_primary_button(r),i.addClass("na-is-primary-category").append(n),r)){let e=r.match(/\d+/g);t.hidden_field.val(e)}},remove_make_primary_button:function(a){e("#"+a).find(".na-make-primary-category").remove(),t.category_checklist.find("input[type=checkbox]:checked").length<2&&t.category_checklist.find(".na-make-primary-category").remove()},remove_primary_label:function(r){let t=e("#"+r);t.find(".na-primary").remove(),t.hasClass("na-is-primary-category")&&(t.removeClass("na-is-primary-category"),a.maybe_set_new_primaryCategory())},maybe_set_new_primaryCategory:function(){if(t.category_checklist.find("input[type=checkbox]:checked").length<2)return;let e=t.category_checklist.find("input[type=checkbox]:checked:first").parents("li").prop("id");a.add_primary_label(e)},update_hidden_field:function(){let a=e(".yoast-wpseo-primary-term").val();t.hidden_field.val(a)}}}(jQuery),jQuery(function(e){primaryCategory.admin.init()});